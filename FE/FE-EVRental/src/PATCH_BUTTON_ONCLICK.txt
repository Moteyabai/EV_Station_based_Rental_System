C·∫¶N S·ª¨A ·ªû D√íNG 1790 - Staff.jsx

THAY ƒê·ªîI onClick c·ªßa button "Xem th√¥ng tin":

=== CODE C≈® (X√ìA) ===
onClick={async () => {
  console.log("üîµ [BUTTON CLICK] Payment data BEFORE refresh:", payment);
  console.log("üîµ [BUTTON CLICK] accountID BEFORE refresh:", payment.accountID);
  
  // Refresh payments FIRST to get latest data
  console.log("üîÑ [REFRESH] Refreshing payments before showing modal...");
  await loadPayments();
  
  // Find the updated payment object from state
  const updatedPayment = payments.find(p => p.paymentID === payment.paymentID);
  
  if (updatedPayment) {
    console.log("‚úÖ [REFRESH] Found updated payment:", updatedPayment);
    console.log("‚úÖ [REFRESH] Updated accountID:", updatedPayment.accountID);
    loadRentalInfo(updatedPayment.rentalID, updatedPayment.accountID);
  } else {
    console.warn("‚ö†Ô∏è [REFRESH] Payment not found after refresh, using original data");
    loadRentalInfo(payment.rentalID, payment.accountID);
  }
}}

=== CODE M·ªöI (THAY TH·∫æ) ===
onClick={async () => {
  // Refresh payments to get fresh data
  const freshPayments = await loadPayments();
  const updatedPayment = freshPayments.find(p => p.paymentID === payment.paymentID);
  
  // Get accountID from renter object (renter.accountID)
  const accountID = updatedPayment?.renter?.accountID || payment.renter?.accountID;
  const rentalID = updatedPayment?.rentalID || payment.rentalID;
  
  console.log("[BUTTON] AccountID from renter:", accountID);
  console.log("[BUTTON] RentalID:", rentalID);
  
  loadRentalInfo(rentalID, accountID);
}}

=== GI·∫¢I TH√çCH ===
Trong API GetPendingPayments, accountID n·∫±m trong object renter:
{
  "paymentID": 20,
  "rentalID": 20,
  "renter": {
    "renterID": 3,
    "accountID": 5,  ‚Üê ƒê√ÇY!
    "documentID": 3
  }
}

V√¨ v·∫≠y ph·∫£i l·∫•y: payment.renter.accountID
